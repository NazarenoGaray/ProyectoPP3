<app-nav-bar></app-nav-bar>

<div class="card container-fluid" id="content-lista">
    <div class="container">
        <div class="card-header row">
            <div class="h2 col-10" for="">Alta Puesto</div>
            <div class="col-2">
                <a class="btn btn-secondary" [routerLink]="['/sector', idSector ]">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-arrow-left-circle" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z" />
                    </svg>
                    <!-- Atrás -->
                </a>
            </div>
        </div>
        <br>

        <div class="card-body">
            <form [formGroup]="puestoForm" class="form-grid" (ngSubmit)="altaPuesto()">
                <!-- Primera Fila -->
                <div class="form-row">
                    <!-- Establecimiento -->
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Seleccionar Establecimiento</mat-label>
                        <input matInput [matAutocomplete]="autoEstablecimiento" formControlName="idEstablecimiento"
                            placeholder="Buscar establecimiento...">
                        <mat-autocomplete #autoEstablecimiento="matAutocomplete"
                            (optionSelected)="onEstablecimientoSelect($event.option.value)">
                            <mat-option *ngFor="let establecimiento of establecimientos" [value]="establecimiento">
                                {{establecimiento.nombre}} - Cuit: {{establecimiento.cuit}}
                            </mat-option>
                        </mat-autocomplete>
                        <mat-error *ngIf="puestoForm.get('idEstablecimiento')?.invalid">
                            Debes seleccionar un establecimiento
                        </mat-error>
                    </mat-form-field>

                    <!-- Sector -->
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Seleccionar Sector</mat-label>
                        <mat-select formControlName="idSector" required>
                            <mat-option *ngFor="let sector of sectores" [value]="sector.idSector">
                                {{ sector.nombre }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="puestoForm.get('idSector')?.invalid">
                            Debes seleccionar un sector
                        </mat-error>
                    </mat-form-field>
                </div>

                <!-- Segunda Fila -->
                <div class="form-row">
                    <!-- Puesto Red -->
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Nomenclatura Puesto Red</mat-label>
                        <textarea matInput formControlName="puestoRed" required rows="3"></textarea>
                        <mat-error *ngIf="puestoForm.get('puestoRed')?.invalid">
                            Este campo es obligatorio
                        </mat-error>
                    </mat-form-field>

                    <!-- Teléfono -->
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Teléfono del Equipo</mat-label>
                        <textarea matInput formControlName="telefono" required rows="3"></textarea>
                        <mat-error *ngIf="puestoForm.get('telefono')?.invalid">
                            Este campo es obligatorio
                        </mat-error>
                    </mat-form-field>
                </div>

                <!-- Tercera Fila -->
                <div class="form-row">
                    <!-- Descripción -->
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Descripción del Equipo</mat-label>
                        <textarea matInput formControlName="descripcion" required rows="3"></textarea>
                        <mat-error *ngIf="puestoForm.get('descripcion')?.invalid">
                            Este campo es obligatorio
                        </mat-error>
                    </mat-form-field>
                </div>

                <!-- Botones -->
                <div class="form-actions">
                    <button mat-raised-button color="primary" type="submit" [disabled]="puestoForm.invalid">
                        <mat-icon>save</mat-icon>
                        Guardar
                    </button>

                    <button mat-stroked-button color="warn" type="button" [routerLink]="['/sector', idSector ]">
                        <mat-icon>cancel</mat-icon>
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<app-pie></app-pie>